/* ===== Base / Layout ===== */
:root{
  --card-w: min(780px, 95%);
  --card-h: clamp(260px, 40vw, 360px);
  --front: #d8d8d8;
  --back:  #d3d3d3;
  --ink:   #0b0b0b;
}

* { box-sizing: border-box; }

body {
  font-family: system-ui, Arial, sans-serif;
  font-size: 1.2em;
  background: #ffffff;
  color: #111;
  margin: 0;
}

h1, h2 { text-align: center; }
label  { display: block; margin-bottom: 8px; color:#222; }

input, select, textarea {
  width: 100%;
  padding: 10px;
  margin-bottom: 10px;
  border: 1px solid #ccc;
  border-radius: 6px;
  background: #fff;
  color: #111;
}

button {
  background-color: #4caf50;
  color: white;
  padding: 10px 15px;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  box-shadow: 0 6px 12px rgba(0,0,0,.25);
}

.errors, .success { margin: 0 auto; max-width: 900px; }
/* Hide empty states so no green bar appears */
.errors:empty, .success:empty { display:none; }

.errors  { white-space: pre-line; color: #b00020; }
.success {
  white-space: pre-line;
  color: #166534;
  background: #dcfce7;
  border: 1px solid #86efac;
  padding: .75rem 1rem;
  border-radius: 8px;
  margin-top: .75rem;
}

.hide { display: none; }

form{
  max-width: 900px;
  margin: 1rem auto 2rem;
  background:#f8f8f8;
  padding: 1.4rem 1.4rem 2.2rem;
  border-radius: 16px;
  box-shadow: 0 10px 18px rgba(0,0,0,.15);
  position: relative; /* keep button above the card stack */
}

#checkoutForm button[type="submit"]{
  display:block;
  margin: 1rem 0 0 auto;
  position: relative;
  z-index: 5; /* ensure visible even over card stack */
}

/* ===== Credit Card Stack ===== */
.card{
  position: relative;
  width: var(--card-w);
  margin: 1rem auto 2.6rem;
  isolation: isolate;
  padding-bottom: 5rem; /* room so back face never covers the button */
}

.card-face{
  position: relative;
  width: 100%;
  height: var(--card-h);
  border-radius: 16px;
  border: 1px solid rgba(0,0,0,.15);
  background: var(--front);
  color: var(--ink);
  padding: 1.1rem 1.25rem 1.25rem;
  display: grid;
  gap: .7rem 1rem;
  box-shadow: 0 12px 22px rgba(0,0,0,.18);
  transition: box-shadow .2s ease, transform .15s ease, border-color .15s ease, outline-color .15s ease;
}

/* FRONT (on top) */
.card-front{
  z-index: 3;
  grid-template-columns: 1.25fr .9fr;
  grid-template-rows: auto auto auto 1fr auto;
  grid-template-areas:
    "total chip"
    "num-label num-label"
    "num num"
    "name-label exp-label"
    "name exp";
}

.card-total{ grid-area: total; font-weight:700; letter-spacing:.5px; }
.card-chip{  grid-area: chip; justify-self:end; align-self:start; font-size:1.55rem; }

/* number */
label[for="creditCardNumber"]{ grid-area: num-label; font-weight:700; letter-spacing:.6px; }
#creditCardNumber{ grid-area: num; }

/* name + expiration */
label[for="nameOnCard"]{ grid-area: name-label; font-weight:700; letter-spacing:.6px; align-self:end; }
#nameOnCard{ grid-area: name; }

/* Single label for both MM + YY via aria-labelledby */
.exp-group{
  grid-area: exp;
  display:grid;
  grid-template-columns: 1fr auto auto;
  grid-template-areas: "label mm yy";
  gap:.6rem;
  align-items:end;
}
.exp-group .card-label{ grid-area: label; font-weight:700; letter-spacing:.6px; }
#month{ grid-area:mm; width:4.2em; text-align:center; }
#year{  grid-area:yy; width:4.2em; text-align:center; }

/* BACK (peeking, CVV visible) */
.card-back{
  position: absolute;
  inset: 0;
  z-index: 2;
  width: 86%;
  transform: translate(12%, 18%); /* right & down so CVV shows */
  background: var(--back);
  pointer-events: none;        /* donâ€™t steal clicks except CVV */

  display:grid;
  grid-template-columns: 1fr 240px;  /* CVV column at right */
  grid-template-rows: auto 1fr auto;
  grid-template-areas:
    "strip strip"
    ". ."
    ". cvc";
  box-shadow: 0 10px 18px rgba(0,0,0,.2);
}

.mag-strip{
  grid-area: strip;
  height: 58px;
  background:#0a0a0a;
  border-radius:8px;
  margin:.35rem 0 1.1rem;
}

label[for="cvc"]{ grid-area: cvc; align-self:start; font-weight:700; letter-spacing:.6px; margin-bottom:.35rem; }
#cvc{
  grid-area: cvc;
  width: 8.2em;
  justify-self: end;
  text-align:center;
  pointer-events: auto;        /* allow typing in CVV */
}

/* Inputs on card faces */
.card input{
  width: 100%;
  padding: .75rem .85rem;
  border: 1px solid #bdbdbd;
  border-radius: 10px;
  background:#fff;
  box-shadow: inset 0 1px 0 rgba(0,0,0,.06);
  font-size:1rem;
}
.card input::placeholder{ color:#8f8f8f; }

/* Focus ring */
.card input:focus{
  outline: 3px solid #22c55e;
  outline-offset: 2px;
  border-color: #16a34a;
  box-shadow: 0 0 0 4px rgba(34,197,94,.18);
}

/* Responsive */
@media (max-width: 720px){
  .card{ padding-bottom: 5.5rem; }
  .card-front{
    grid-template-columns: 1fr;
    grid-template-areas:
      "total"
      "chip"
      "num-label"
      "num"
      "name-label"
      "name"
      "exp-label"
      "exp";
  }
  .card-chip{ justify-self:start; }
  .card-back{
    width: 92%;
    transform: translate(6%, 26%);
    grid-template-columns: 1fr 200px;
  }
}
  